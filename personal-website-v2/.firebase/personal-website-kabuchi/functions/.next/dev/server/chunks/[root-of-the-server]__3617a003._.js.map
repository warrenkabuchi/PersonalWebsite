{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/kabuchi/Documents/Personal%20Website/personal-website-v2/app/api/booking/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport { Resend } from \"resend\";\n\nconst resend = new Resend(process.env.RESEND_API_KEY);\n\nexport async function POST(request: Request) {\n    try {\n        const body = await request.json();\n        const { type, name, email, phone, eventType, date, details, company, role, interest, message, destination, travelDates, budget, travelers, interests } = body;\n\n        // Basic Validation\n        if (!name || !email) {\n            return NextResponse.json({ error: \"Missing required fields\" }, { status: 400 });\n        }\n\n        let subject = \"New Request\";\n        let htmlContent = \"\";\n\n        if (type === 'ai') {\n            subject = `AI Consultation Request: ${name}`;\n            htmlContent = `\n        <h1>New AI Consultation Request</h1>\n        <p><strong>Name:</strong> ${name}</p>\n        <p><strong>Email:</strong> ${email}</p>\n        <p><strong>Company:</strong> ${company || \"N/A\"}</p>\n        <p><strong>Role:</strong> ${role || \"N/A\"}</p>\n        <p><strong>Interest:</strong> ${interest}</p>\n        <p><strong>Message:</strong></p>\n        <p>${message}</p>\n      `;\n        } else if (type === 'travel') {\n            subject = `Travel Planning Request: ${name}`;\n            htmlContent = `\n        <h1>New Travel Planning Request</h1>\n        <p><strong>Name:</strong> ${name}</p>\n        <p><strong>Email:</strong> ${email}</p>\n        <p><strong>Destination:</strong> ${destination}</p>\n        <p><strong>Dates:</strong> ${travelDates}</p>\n        <p><strong>Budget:</strong> ${budget}</p>\n        <p><strong>Travelers:</strong> ${travelers}</p>\n        <p><strong>Interests:</strong></p>\n        <p>${interests}</p>\n      `;\n        } else {\n            // Default to DJ Booking\n            subject = `New DJ Booking Request: ${eventType} - ${name}`;\n            htmlContent = `\n        <h1>New DJ Booking Request</h1>\n        <p><strong>Name:</strong> ${name}</p>\n        <p><strong>Email:</strong> ${email}</p>\n        <p><strong>Phone:</strong> ${phone}</p>\n        <p><strong>Event Type:</strong> ${eventType}</p>\n        <p><strong>Date:</strong> ${date}</p>\n        <p><strong>Details:</strong> ${details || \"N/A\"}</p>\n      `;\n        }\n\n        // Send Email Notification (to you)\n        const emailResponse = await resend.emails.send({\n            from: \"Booking Request <onboarding@resend.dev>\", // Update this once you have a domain\n            to: process.env.MY_EMAIL || \"delivered@resend.dev\",\n            subject: subject,\n            html: htmlContent,\n        });\n\n        if (emailResponse.error) {\n            console.error(\"Resend Error:\", emailResponse.error);\n            return NextResponse.json({ error: \"Failed to send email\" }, { status: 500 });\n        }\n\n        return NextResponse.json({ success: true, message: \"Booking request received\" });\n    } catch (error) {\n        console.error(\"Booking Error:\", error);\n        return NextResponse.json({ error: \"Internal Server Error\" }, { status: 500 });\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,SAAS,IAAI,iLAAM,CAAC,QAAQ,GAAG,CAAC,cAAc;AAE7C,eAAe,KAAK,OAAgB;IACvC,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,SAAS,EAAE,IAAI,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAE,WAAW,EAAE,WAAW,EAAE,MAAM,EAAE,SAAS,EAAE,SAAS,EAAE,GAAG;QAEzJ,mBAAmB;QACnB,IAAI,CAAC,QAAQ,CAAC,OAAO;YACjB,OAAO,6KAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QACjF;QAEA,IAAI,UAAU;QACd,IAAI,cAAc;QAElB,IAAI,SAAS,MAAM;YACf,UAAU,CAAC,yBAAyB,EAAE,MAAM;YAC5C,cAAc,CAAC;;kCAEO,EAAE,KAAK;mCACN,EAAE,MAAM;qCACN,EAAE,WAAW,MAAM;kCACtB,EAAE,QAAQ,MAAM;sCACZ,EAAE,SAAS;;WAEtC,EAAE,QAAQ;MACf,CAAC;QACC,OAAO,IAAI,SAAS,UAAU;YAC1B,UAAU,CAAC,yBAAyB,EAAE,MAAM;YAC5C,cAAc,CAAC;;kCAEO,EAAE,KAAK;mCACN,EAAE,MAAM;yCACF,EAAE,YAAY;mCACpB,EAAE,YAAY;oCACb,EAAE,OAAO;uCACN,EAAE,UAAU;;WAExC,EAAE,UAAU;MACjB,CAAC;QACC,OAAO;YACH,wBAAwB;YACxB,UAAU,CAAC,wBAAwB,EAAE,UAAU,GAAG,EAAE,MAAM;YAC1D,cAAc,CAAC;;kCAEO,EAAE,KAAK;mCACN,EAAE,MAAM;mCACR,EAAE,MAAM;wCACH,EAAE,UAAU;kCAClB,EAAE,KAAK;qCACJ,EAAE,WAAW,MAAM;MAClD,CAAC;QACC;QAEA,mCAAmC;QACnC,MAAM,gBAAgB,MAAM,OAAO,MAAM,CAAC,IAAI,CAAC;YAC3C,MAAM;YACN,IAAI,QAAQ,GAAG,CAAC,QAAQ,IAAI;YAC5B,SAAS;YACT,MAAM;QACV;QAEA,IAAI,cAAc,KAAK,EAAE;YACrB,QAAQ,KAAK,CAAC,iBAAiB,cAAc,KAAK;YAClD,OAAO,6KAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAuB,GAAG;gBAAE,QAAQ;YAAI;QAC9E;QAEA,OAAO,6KAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,SAAS;QAA2B;IAClF,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,kBAAkB;QAChC,OAAO,6KAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAwB,GAAG;YAAE,QAAQ;QAAI;IAC/E;AACJ"}}]
}